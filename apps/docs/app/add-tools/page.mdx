# Add Public Tools to Your Agent

AI Agents can't just interact with the outside world on their own, instead we need to provide them integrations. Our agent today uses <ExternalLink href="https://ai-sdk.dev">Vercel AI SDK</ExternalLink> 
in order to access stock api, we'll provide it basic tools to call. 

## What we're building in this step

<Mermaid chart={`
graph TB
    subgraph "Public Tools Added"
        User[üë§ User]
        Agent[ü§ñ AI Agent<br/>:3003]
        API[üìä Stock API<br/>:3001]
        Tools[üîß Public Tools<br/>@workspace/agent-utils]
    end
    
    User --> |"What's WAYNE stock price?"| Agent
    Agent --> |"getStockPrice('WAYNE')"| Tools
    Tools --> |"Fetch public data"| API
    API --> |"$150.25"| Tools
    Tools --> Agent
    Agent --> |"WAYNE is trading at $150.25"| User
    
    class User,Agent,API active
    class Tools tools
`} />

## Add tools

Your agent already has an empty tools configuration at `app/api/chat/tools.ts`. These are then imported into `app/api/chat/route.ts`. Lets start by building a very basic tool

In `app/api/chat/` create a new file `fetch-stock-price.ts`. 

```typescript
import z from "zod";
import { tool } from "ai";

export const getStockPrice = tool({
  description: 'Get current stock price by symbol for Demo Trade Pro Platform',
  inputSchema:  z.object({
      symbol: z.string()
        .min(1, 'Stock symbol is required')
        .max(10, 'Stock symbol must be 10 characters or less')
        .regex(/^[A-Z]+$/, 'Stock symbol must be uppercase letters only')
        .describe('Stock symbol (e.g., WAYNE, STARK)')
  }),
  async execute({ symbol }) { 
    const response = await fetch("https://workshop-stock-api.auth101.dev/api/stocks/" + symbol);
    if (response.ok) {
      return await response.json();
    }
  }
})
```

Then you can import this tool in the tools, allowing the ai-agent to use it, update the `app/api/chat/tools.ts` to now expose the `getStockPrice` tool.

```typescript
import { getStockPrice } from "./fetch-stock-price"

export const agentTools = { 
  getStockPrice
}
```

**Test your agent**: Now you should be able to fetch stock prices for WAYNE.


## Leverage shared tools

Ideally the tool code should be packaged nicely and tested, since we are already using a monorepo we decided to make that easy for you! All of our tooks are provided as `@workspace/agent-utils`. To start using `@workspace/agent-utils` you can import the tools by name from `/tools` directory. 

We also provided a `api-client` this handles the nitty-gritty details of calling the DemoTradePro API Server, including retries, and error handling. Let's start by first importing the `createAPIClient` function to create our own client to call DemoTradePro API Server.

In your `/apps/agent/app/route/tools.ts` import the `createAPIClient` function and then invoke it with `process.env.API_BASE_URL` this environment variable is configured to `"https://workshop-stock-api.auth101.dev/api/` by the init script, in the setup. 

```typescript
import { createAPIClient } from '@workspace/agent-utils';

/**
 * Create shared API client for public endpoints
 * No token provider needed for public market data
 */
const apiClient = createAPIClient(process.env.API_BASE_URL!);
```

Now we can import a pre-built tool from our toolkit, such as `GetStockPrice`, and create an instance suitable for Vercel AI SDK.

```typescript
import * as GetStockPrice from '@workspace/agent-utils/tools/get-stock-price';

const getStockPrice = GetStockPrice.createAISDKTool(apiClient);
```

The above code replaces, the tool we wrote in the previous step, and the full file should can now be updated to 

```typescript
import { createAPIClient } from '@workspace/agent-utils';

/**
 * Create shared API client for public endpoints
 * No token provider needed for public market data
 */
const apiClient = createAPIClient(process.env.API_BASE_URL!);
const getStockPrice = GetStockPrice.createAISDKTool(apiClient);

export const agentTools = {
  getStockPrice
}
```

**Test your agent**: Now you you should still be able to fetch stock prices for WAYNE.

With the same pattern we can now import all tools that are available for Public API Usage, 
the final file will look like.

```typescript
/**
 * DemoTradePro Agent Tools Configuration
 * Centralized tool definitions for the chat agent
 */
import { createAPIClient } from '@workspace/agent-utils';
import * as GetStockPrice from '@workspace/agent-utils/tools/get-stock-price';
import * as SearchStocks from '@workspace/agent-utils/tools/search-stocks';
import * as GetStockInfo from '@workspace/agent-utils/tools/get-stock-info';

/**
 * Create shared API client for public endpoints
 * No token provider needed for public market data
 */
const apiClient = createAPIClient(process.env.API_BASE_URL!);

/**
 * Public stock market tools - no authentication required
 */
export const publicStockTools = {
  getStockPrice: GetStockPrice.createAISDKTool(apiClient),
  searchStocks: SearchStocks.createAISDKTool(apiClient),
  getStockInfo: GetStockInfo.createAISDKTool(apiClient),
} as const;

/**
 * All available tools for the agent
 * Currently only includes public tools - authenticated tools will be added later
 */
export const agentTools = {
  ...publicStockTools,
} as const;
```

**What these tools do:**
- ‚úÖ `getStockPrice` - Get current price for any stock symbol
- ‚úÖ `searchStocks` - Find stocks by company name
- ‚úÖ `getStockInfo` - Get detailed company information

Now let's test the stock tools.

**Test these prompts:**

1. **Stock price:** *"What's the current price of WAYNE stock?"*
   - Should call `getStockPrice` tool and show real price data!

2. **Company search:** *"Find me information about Stark Industries"*
   - Should use `searchStocks` and `getStockInfo` tools

3. **General trading:** *"What's your role?"*
   - Should work as before (trading advice)

**Expected behavior:**
- Agent will pause, call the appropriate tool
- Show real stock data from DemoTradePro API
- Provide insights about the companies

---

## üéâ Success! Public Data Works Great

Your agent now has **public stock data access** and it works perfectly!

**What you've built:**
- ‚úÖ Working AI SDK v5 agent with tools
- ‚úÖ Real-time stock price fetching
- ‚úÖ Company information lookup
- ‚úÖ Clean shared tools architecture
- ‚úÖ **No authentication needed** - public data is safe!

**Try these test prompts:**
- *"What's WAYNE trading at today?"*
- *"Tell me about Stark Industries"*
- *"Search for companies with 'Wayne' in the name"*

---

## ü§î But What About Personal Data?

Now try asking: *"What's in my portfolio?"* or *"What stocks do I own?"*

**Agent response:** *"I don't have access to your personal portfolio data..."*

**The problem:** Your agent can fetch public data, but has no way to know **who you are** or access **your personal** trading data.

**Coming up:** We'll add authentication so your agent knows your identity and can access your personal portfolio! üîê
